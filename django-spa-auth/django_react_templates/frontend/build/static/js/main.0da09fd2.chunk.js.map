{"version":3,"sources":["App.js","index.js"],"names":["cookies","Cookies","App","props","componentDidMount","getSession","fetch","credentials","then","res","json","data","console","log","isAuthenticated","setState","catch","err","whoami","headers","username","handlePasswordChange","event","password","target","value","handleUserNameChange","login","preventDefault","method","get","body","JSON","stringify","state","isResponseOk","error","logout","response","status","Error","statusText","this","className","onClick","onSubmit","htmlFor","type","id","name","onChange","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0da09fd2.chunk.js","sourcesContent":["import React from \"react\";\nimport Cookies from \"universal-cookie\";\n\nconst cookies = new Cookies();\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      error: \"\",\n      isAuthenticated: false,\n    };\n  }\n\n  componentDidMount = () => {\n    this.getSession();\n  }\n\n  getSession = () => {\n    fetch(\"/api/session/\", {\n      credentials: \"same-origin\",\n    })\n    .then((res) => res.json())\n    .then((data) => {\n      console.log(data);\n      if (data.isAuthenticated) {\n        this.setState({isAuthenticated: true});\n      } else {\n        this.setState({isAuthenticated: false});\n      }\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n\n  whoami = () => {\n    fetch(\"/api/whoami/\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"same-origin\",\n    })\n    .then((res) => res.json())\n    .then((data) => {\n      console.log(\"You are logged in as: \" + data.username);\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  }\n\n  handlePasswordChange = (event) => {\n    this.setState({password: event.target.value});\n  }\n\n  handleUserNameChange = (event) => {\n    this.setState({username: event.target.value});\n  }\n\n  isResponseOk(response) {\n    if (response.status >= 200 && response.status <= 299) {\n      return response.json();\n    } else {\n      throw Error(response.statusText);\n    }\n  }\n\n  login = (event) => {\n    event.preventDefault();\n    fetch(\"/api/login/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRFToken\": cookies.get(\"csrftoken\"),\n      },\n      credentials: \"same-origin\",\n      body: JSON.stringify({username: this.state.username, password: this.state.password}),\n    })\n    .then(this.isResponseOk)\n    .then((data) => {\n      console.log(data);\n      this.setState({isAuthenticated: true, username: \"\", password: \"\", error: \"\"});\n    })\n    .catch((err) => {\n      console.log(err);\n      this.setState({error: \"Wrong username or password.\"});\n    });\n  }\n\n  logout = () => {\n    fetch(\"/api/logout\", {\n      credentials: \"same-origin\",\n    })\n    .then(this.isResponseOk)\n    .then((data) => {\n      console.log(data);\n      this.setState({isAuthenticated: false});\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n  };\n\n  render() {\n    if (!this.state.isAuthenticated) {\n      return (\n        <div className=\"container mt-3\">\n          <h1>React Cookie Auth</h1>\n          <br />\n          <h2>Login</h2>\n          <form onSubmit={this.login}>\n            <div className=\"form-group\">\n              <label htmlFor=\"username\">Username</label>\n              <input type=\"text\" className=\"form-control\" id=\"username\" name=\"username\" value={this.state.username} onChange={this.handleUserNameChange} />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"username\">Password</label>\n              <input type=\"password\" className=\"form-control\" id=\"password\" name=\"password\" value={this.state.password} onChange={this.handlePasswordChange} />\n              <div>\n                {this.state.error &&\n                  <small className=\"text-danger\">\n                    {this.state.error}\n                  </small>\n                }\n              </div>\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">Login</button>\n          </form>\n        </div>\n      );\n    }\n    return (\n      <div className=\"container mt-3\">\n        <h1>React Cookie Auth</h1>\n        <p>You are logged in!</p>\n        <button className=\"btn btn-primary mr-2\" onClick={this.whoami}>WhoAmI</button>\n        <button className=\"btn btn-danger\" onClick={this.logout}>Log out</button>\n      </div>\n    )\n  }\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\n\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}